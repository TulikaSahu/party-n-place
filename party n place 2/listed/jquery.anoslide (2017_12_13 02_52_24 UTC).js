
(function(){var e=function(e,n){this.slides=[];this.progress=false;this.current=0;this.element=$(e);this.options=$.extend({items:5,speed:1e3,auto:0,autoStop:true,next:"",prev:"",responsiveAt:480,delay:0,lazy:false,onConstruct:function(e){},onStart:function(e){},onEnd:function(e){}},n);this.defaults={items:this.options.items,auto:0};this.preloader=new t;this.timeout=null};e.prototype={construct:function(){this.defaults.auto=this.options.auto;this.element.css({position:"relative",overflow:"hidden",display:"block"}).children().css({position:"absolute",cursor:"pointer",overflow:"hidden",display:"block"}).each(n(this,function(e,t){this.slides.push({element:$(t)})})).find("img").css({"float":"left"});$(window).on({resize:n(this,this.adapt)});if(this.options.next){$(this.options.next).on("click",n(this,this.next))}if(this.options.prev){$(this.options.prev).on("click",n(this,this.prev))}if(this.options.autoStop){this.element.parent().on({mouseenter:n(this,function(e){if(this.timeout){clearTimeout(this.timeout);this.options.auto=0}}),mouseleave:n(this,function(e){this.options.auto=this.defaults.auto;this.go(this.current)})})}this.options.onConstruct.apply(this,[this]);this.adapt().go(0)},preload:function(e,t){var n=[];if(this.options.lazy){for(i=e,l=e+this.options.items;i<l;i++){if(this.slides[i].element.find("img[data-src]").length){n.push({source:this.slides[i].element.find("img[data-src]").data("src")})}}}if(n.length){this.preloader.reset().append(n).preload(t)}else{t.apply(this,[{images:[]}])}},animate:function(e,t,r){if(!this.progress){this.progress=true;var i={w:this.element.parent().outerWidth(),h:this.element.parent().outerHeight()};this.options.onStart.apply(this,[{instance:this,index:e,slide:this.slides[e]}]);$.each(r?this.slides.reverse():this.slides,n(this,function(i,s){var o=(r?-(e-(this.slides.length-1-i)):-(e-i))*this.element.width()/this.options.items;if(s.element.find("img[data-src]").length&&t.length){if(1==this.options.items){if(e==i){var u=t.pop().image;s.element.find("img[data-src]").replaceWith(u)}}else{var u=t.pop().image;s.element.find("img[data-src]").replaceWith(u)}}var a=i==e?n(this,function(){this.progress=false;this.options.onEnd.apply(this,[{instance:this,index:this.current,slide:this.slides[this.current]}]);if(this.options.auto){if(this.timeout){clearTimeout(this.timeout)}this.timeout=setTimeout(n(this,this.next),this.options.auto)}}):function(){};s.element.css({width:Math.floor(this.element.outerWidth()/this.options.items)+"px",height:"auto"}).delay(i*this.options.delay).animate({left:o+"px"},this.options.speed,a)}));if(r){this.slides.reverse()}this.element.animate({height:this.slides[e].element.outerHeight()-2});var s=this.slides.length-this.options.items-this.current;if(!s){this.disable.next.call(this)}else this.enable.next.call(this);if(e-1<0){this.disable.prev.call(this)}else{this.enable.prev.call(this)}}return this},adapt:function(){var e={w:this.element.parent().outerWidth(),h:this.element.parent().outerHeight()};if(e.w<this.options.responsiveAt){this.options.items=1}else{this.options.items=this.defaults.items}$.each(this.slides,n(this,function(e,t){var r=-(this.current-e)*this.element.width()/this.options.items;t.element.stop().css({width:this.element.width()/this.options.items,left:r},this.options.speed,e==this.slides.length-1?n(this,function(){this.progress=false}):function(){})}));if(0!==this.slides[this.current].element.parent().height()){this.element.css({height:this.slides[this.current].element.outerHeight()-2})}return this},next:function(){var e=this.slides.length-this.options.items-this.current;if(e){this.go(this.current+1)}else{this.go(0)}},prev:function(){this.go(this.current-1,true)},stop:function(){if(this.timeout){clearTimeout(this.timeout)}this.progress=false;return this},go:function(e,t){t=t||false;if(!this.progress){if(e<0||e>this.slides.length-1){return false}else{this.current=e;this.preload(e,n(this,function(n){this.animate(e,n.images,t)}))}}},enable:{next:function(){$(this.options.next).removeClass("disabled").fadeIn(300)},prev:function(){$(this.options.prev).removeClass("disabled").fadeIn(300)}},disable:{next:function(){$(this.options.next).addClass("disabled").fadeOut(300)},prev:function(){$(this.options.prev).addClass("disabled").fadeOut(300)}}};var t=function(){this.queue=[];this.images=[];this.total=0;this.config={cache:true};this.time={start:0,end:0}};t.prototype={onComplete:function(e){},reset:function(){this.queue=[];this.images=[];this.total=0;return this},append:function(e){var t=this.queue;$.each(e,function(e,n){t.push(n)});return this},finish:function(e,t,n){this.total--;$.each(this.images,function(e,r){if(r.index==t){r.size={width:n.width,height:n.height}}});if(0==this.total){this.time.end=(new Date).getTime();this.onComplete.apply(this,[{time:((this.time.end-this.time.start)/1e3).toPrecision(2),images:this.images}])}},preload:function(e){this.onComplete=e||this.onComplete;this.time.start=(new Date).getTime();this.total=i=this.queue.length;while(i--){var t=new Image;this.images.push({index:i,image:t,size:{width:0,height:0}});t.onload=t.onerror=t.onabort=n(this,this.finish,[i,t]);t.src=this.config.cache?this.queue[i].source:this.queue[i].source+"?u="+(new Date).getTime()}}};$.fn.anoSlide=function(t){return this.each(function(){if(undefined==$(this).data("anoSlide")){var n=(new e(this,t)).construct();$(this).data("anoSlide",n)}})};var n=function(e,t,n){return typeof t==="function"?function(){arguments.push=Array.prototype.push;for(var r in n){arguments.push(n[r])}return t.apply(e,arguments)}:function(){return false}}})()